<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Game Predictor — Harvard vs Yale</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--crimson:#A51C30;--yale-blue:#00356B;--bg:#0a0a0f;--card:#12121a;--border:#1e1e2e;--text:#e0e0e0;--muted:#888}
body{font-family:'Georgia',serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}
.container{max-width:1100px;margin:0 auto;padding:2rem 1.5rem}

/* Header */
header{text-align:center;padding:3rem 0 2rem;border-bottom:1px solid var(--border)}
header h1{font-size:2.8rem;font-weight:400;letter-spacing:-.02em;margin-bottom:.5rem}
header h1 span.h{color:var(--crimson)}
header h1 span.y{color:var(--yale-blue)}
header p.sub{color:var(--muted);font-size:1.1rem;font-style:italic}

/* Countdown */
.countdown-section{text-align:center;padding:2.5rem 0;border-bottom:1px solid var(--border)}
.countdown-section h2{font-size:1rem;text-transform:uppercase;letter-spacing:.2em;color:var(--muted);margin-bottom:1.2rem}
.countdown{display:flex;justify-content:center;gap:2rem;flex-wrap:wrap}
.countdown .unit{display:flex;flex-direction:column;align-items:center}
.countdown .num{font-size:3.2rem;font-weight:300;line-height:1}
.countdown .lbl{font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted);margin-top:.3rem}

/* Prediction */
.prediction-panel{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2.5rem;margin:2.5rem 0;text-align:center}
.prediction-panel h2{font-size:1.6rem;font-weight:400;margin-bottom:1.5rem}
.prob-bar{display:flex;height:48px;border-radius:8px;overflow:hidden;margin-bottom:1rem;position:relative}
.prob-bar .h-side{background:var(--crimson);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;transition:width .8s ease}
.prob-bar .y-side{background:var(--yale-blue);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem;transition:width .8s ease}
.pred-labels{display:flex;justify-content:space-between;font-size:.9rem;color:var(--muted)}
.pred-score{font-size:2rem;margin:1.5rem 0 .5rem;font-weight:300}
.pred-score .h-score{color:var(--crimson)}
.pred-score .y-score{color:var(--yale-blue)}
.method-note{font-size:.8rem;color:var(--muted);font-style:italic;margin-top:1rem}

/* Factors */
.factors{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin:2rem 0}
.factor-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:1.5rem}
.factor-card h3{font-size:.85rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted);margin-bottom:1rem}
.factor-card .val{font-size:1.8rem;font-weight:300;margin-bottom:.5rem}
.factor-card .detail{font-size:.85rem;color:var(--muted);line-height:1.5}

/* Historical */
.history-section{margin:2.5rem 0}
.history-section h2{font-size:1.4rem;font-weight:400;margin-bottom:1.5rem;text-align:center}
.decade-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:1rem}
.decade-card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1rem;text-align:center}
.decade-card .era{font-size:.8rem;color:var(--muted);margin-bottom:.5rem}
.decade-card .record{font-size:1rem}
.decade-card .dominant{font-size:.75rem;margin-top:.4rem;font-weight:600}
.dominant.h-dom{color:var(--crimson)}
.dominant.y-dom{color:var(--yale-blue)}
.dominant.split{color:var(--muted)}

/* Streaks */
.streaks{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem;margin:2rem 0}
.streak-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:1.5rem;text-align:center}
.streak-card h3{font-size:.8rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted);margin-bottom:.8rem}
.streak-card .big{font-size:2.4rem;font-weight:300}

/* All-time */
.alltime{text-align:center;padding:2rem 0;border-top:1px solid var(--border);margin-top:2rem}
.alltime h2{font-size:1.2rem;font-weight:400;margin-bottom:1rem}
.alltime-nums{display:flex;justify-content:center;gap:3rem;flex-wrap:wrap}
.alltime-nums .stat{display:flex;flex-direction:column;align-items:center}
.alltime-nums .stat .n{font-size:2.5rem;font-weight:300}
.alltime-nums .stat .l{font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted);margin-top:.2rem}

/* Footer */
footer{text-align:center;padding:2rem 0;color:var(--muted);font-size:.75rem;border-top:1px solid var(--border);margin-top:2rem}

@media(max-width:600px){
  header h1{font-size:1.8rem}
  .countdown .num{font-size:2.2rem}
  .pred-score{font-size:1.5rem}
  .alltime-nums .stat .n{font-size:1.8rem}
}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1><span class="h">Harvard</span> vs <span class="y">Yale</span></h1>
    <p class="sub">The Game Predictor — Historical Modeling &amp; Analysis Since 1875</p>
  </header>

  <section class="countdown-section">
    <h2>Countdown to The 143rd Game</h2>
    <div class="countdown" id="countdown">
      <div class="unit"><span class="num" id="cd-days">---</span><span class="lbl">Days</span></div>
      <div class="unit"><span class="num" id="cd-hrs">--</span><span class="lbl">Hours</span></div>
      <div class="unit"><span class="num" id="cd-min">--</span><span class="lbl">Minutes</span></div>
      <div class="unit"><span class="num" id="cd-sec">--</span><span class="lbl">Seconds</span></div>
    </div>
  </section>

  <section class="season-standings" id="standings-section" style="margin:2.5rem 0;display:none">
    <h2 style="font-size:1.4rem;font-weight:400;margin-bottom:1.5rem;text-align:center">
      <span id="season-year">2025</span> Ivy League Season Standings
      <span id="standings-live-badge" style="display:inline-block;background:#22c55e;color:#000;font-size:.6rem;padding:2px 8px;border-radius:10px;vertical-align:middle;margin-left:.5rem;text-transform:uppercase;letter-spacing:.1em">Live</span>
    </h2>
    <div style="overflow-x:auto">
      <table id="standings-table" style="width:100%;border-collapse:collapse;background:var(--card);border-radius:10px;overflow:hidden;border:1px solid var(--border)">
        <thead>
          <tr style="border-bottom:1px solid var(--border)">
            <th style="padding:.8rem 1rem;text-align:left;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">Team</th>
            <th style="padding:.8rem 1rem;text-align:center;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">Conf</th>
            <th style="padding:.8rem 1rem;text-align:center;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">Overall</th>
            <th style="padding:.8rem 1rem;text-align:center;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">PF</th>
            <th style="padding:.8rem 1rem;text-align:center;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">PA</th>
            <th style="padding:.8rem 1rem;text-align:center;font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted)">Diff</th>
          </tr>
        </thead>
        <tbody id="standings-body"></tbody>
      </table>
    </div>
    <p id="standings-updated" style="text-align:center;font-size:.7rem;color:var(--muted);margin-top:.8rem;font-style:italic"></p>
  </section>

  <section class="prediction-panel">
    <h2>2026 Prediction Model</h2>
    <div id="model-source-badge" style="text-align:center;margin-bottom:1rem">
      <span id="model-badge" style="display:inline-block;background:var(--border);color:var(--muted);font-size:.65rem;padding:2px 10px;border-radius:10px;text-transform:uppercase;letter-spacing:.1em">Historical baseline</span>
    </div>
    <div class="prob-bar">
      <div class="h-side" id="hbar" style="width:52%">52%</div>
      <div class="y-side" id="ybar" style="width:48%">48%</div>
    </div>
    <div class="pred-labels">
      <span>Harvard Crimson</span>
      <span>Yale Bulldogs</span>
    </div>
    <div class="pred-score">
      Projected: <span class="h-score" id="h-proj-score">24</span> – <span class="y-score" id="y-proj-score">21</span>
    </div>
    <p class="method-note">Model based on historical win rates, recent form (10-year window), home-field advantage, and <strong>live Ivy League season data</strong>. Weights auto-adjust as the season progresses.</p>
    <div id="weight-breakdown" style="display:none;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)">
      <h3 style="font-size:.75rem;text-transform:uppercase;letter-spacing:.15em;color:var(--muted);margin-bottom:1rem;text-align:center">Model Weight Breakdown</h3>
      <div style="display:flex;justify-content:center;gap:1.5rem;flex-wrap:wrap" id="weight-bars"></div>
    </div>
  </section>

  <section class="factors">
    <div class="factor-card">
      <h3>Recent Form (2016–2025)</h3>
      <div class="val" style="color:var(--yale-blue)">Yale 6–4</div>
      <div class="detail">Yale has won 6 of the last 10 meetings, including a dominant 2019 victory. Slight edge to the Bulldogs in recent history.</div>
    </div>
    <div class="factor-card">
      <h3>Home Field Edge</h3>
      <div class="val">+3.2 pts</div>
      <div class="detail">The home team has averaged a 3.2-point advantage since 2000. The 2026 game is at Harvard Stadium — advantage Crimson.</div>
    </div>
    <div class="factor-card" id="season-momentum-card">
      <h3>Season Momentum</h3>
      <div class="val" id="season-momentum-val" style="color:var(--muted)">Loading…</div>
      <div class="detail" id="season-momentum-detail">Fetching current Ivy League season data to calculate momentum factor.</div>
    </div>
    <div class="factor-card" id="scoring-power-card">
      <h3>Scoring Power Index</h3>
      <div class="val" id="scoring-power-val" style="color:var(--muted)">Loading…</div>
      <div class="detail" id="scoring-power-detail">Comparing points-for and points-against differentials from the current season.</div>
    </div>
    <div class="factor-card">
      <h3>Rivalry Volatility</h3>
      <div class="val">72%</div>
      <div class="detail">72% of Games since 2000 have been decided by 10 points or fewer. Any given Saturday, either team can win.</div>
    </div>
    <div class="factor-card">
      <h3>Streak Analysis</h3>
      <div class="val">No active streak &gt;2</div>
      <div class="detail">Neither team has won more than 2 consecutive Games recently, suggesting regression patterns favor alternation.</div>
    </div>
  </section>

  <section class="history-section">
    <h2>Decade-by-Decade Dominance</h2>
    <div class="decade-grid" id="decades"></div>
  </section>

  <section class="streaks">
    <div class="streak-card">
      <h3>Longest Harvard Streak</h3>
      <div class="big" style="color:var(--crimson)">9</div>
      <p style="font-size:.8rem;color:var(--muted);margin-top:.3rem">1890–1898</p>
    </div>
    <div class="streak-card">
      <h3>Longest Yale Streak</h3>
      <div class="big" style="color:var(--yale-blue)">8</div>
      <p style="font-size:.8rem;color:var(--muted);margin-top:.3rem">1880–1887</p>
    </div>
    <div class="streak-card">
      <h3>Biggest Blowout</h3>
      <div class="big">54–0</div>
      <p style="font-size:.8rem;color:var(--muted);margin-top:.3rem">Yale, 1884</p>
    </div>
    <div class="streak-card">
      <h3>Most Famous Game</h3>
      <div class="big" style="font-size:1.6rem">29–29</div>
      <p style="font-size:.8rem;color:var(--muted);margin-top:.3rem">1968 — "Harvard Beats Yale"</p>
    </div>
  </section>

  <section class="alltime">
    <h2>All-Time Series Record</h2>
    <div class="alltime-nums">
      <div class="stat"><span class="n" style="color:var(--crimson)">61</span><span class="l">Harvard Wins</span></div>
      <div class="stat"><span class="n" style="color:var(--yale-blue)">71</span><span class="l">Yale Wins</span></div>
      <div class="stat"><span class="n">8</span><span class="l">Ties</span></div>
      <div class="stat"><span class="n">140</span><span class="l">Games Played</span></div>
    </div>
  </section>

  <footer>
    <p>The Game Predictor — A Project PS Product</p>
    <p style="margin-top:.5rem">Historical data compiled from NCAA records. Prediction model for entertainment purposes.</p>
  </footer>
</div>

<script>
// Countdown to The Game 2026 — typically 3rd Saturday of November
// Nov 21, 2026, 12:00 PM ET
const gameDate = new Date('2026-11-21T17:00:00Z');
function updateCountdown(){
  const now = new Date();
  let diff = gameDate - now;
  if(diff<0){document.getElementById('countdown').innerHTML='<p style="color:var(--muted);font-style:italic">Game Day has arrived!</p>';return}
  const d=Math.floor(diff/86400000);diff%=86400000;
  const h=Math.floor(diff/3600000);diff%=3600000;
  const m=Math.floor(diff/60000);diff%=60000;
  const s=Math.floor(diff/1000);
  document.getElementById('cd-days').textContent=d;
  document.getElementById('cd-hrs').textContent=String(h).padStart(2,'0');
  document.getElementById('cd-min').textContent=String(m).padStart(2,'0');
  document.getElementById('cd-sec').textContent=String(s).padStart(2,'0');
}
updateCountdown();setInterval(updateCountdown,1000);

// ===== LIVE SEASON DATA INTEGRATION =====
const ESPN_IVY_STANDINGS = 'https://site.api.espn.com/apis/v2/sports/football/college-football/standings?group=22';
const FALLBACK_DATA_URL = 'data/ivy-league.json';

// Baseline model weights (no season data)
const BASE_WEIGHTS = { historical: 0.30, recentForm: 0.35, homefield: 0.20, season: 0.15 };
// With live data, season weight increases
const LIVE_WEIGHTS = { historical: 0.20, recentForm: 0.25, homefield: 0.15, season: 0.40 };

// Base factor scores (Harvard perspective, 0-1 scale, 0.5 = neutral)
const BASE_SCORES = { historical: 0.53, recentForm: 0.42, homefield: 0.62 };

function computePrediction(weights, seasonScore) {
  const wSum = weights.historical + weights.recentForm + weights.homefield + weights.season;
  const raw = (
    weights.historical * BASE_SCORES.historical +
    weights.recentForm * BASE_SCORES.recentForm +
    weights.homefield * BASE_SCORES.homefield +
    weights.season * seasonScore
  ) / wSum;
  // Clamp between 0.25 and 0.75 for realism
  const hProb = Math.max(0.25, Math.min(0.75, raw));
  const hPct = Math.round(hProb * 100);
  const yPct = 100 - hPct;
  // Projected score: base around 21-24 range, adjust by probability
  const totalPts = 45;
  const hScore = Math.round(totalPts * hProb);
  const yScore = Math.round(totalPts * (1 - hProb));
  return { hPct, yPct, hScore, yScore, weights, seasonScore };
}

function updatePredictionUI(pred, isLive) {
  document.getElementById('hbar').style.width = pred.hPct + '%';
  document.getElementById('hbar').textContent = pred.hPct + '%';
  document.getElementById('ybar').style.width = pred.yPct + '%';
  document.getElementById('ybar').textContent = pred.yPct + '%';
  document.getElementById('h-proj-score').textContent = pred.hScore;
  document.getElementById('y-proj-score').textContent = pred.yScore;

  const badge = document.getElementById('model-badge');
  if (isLive) {
    badge.textContent = 'Season-adjusted';
    badge.style.background = '#22c55e';
    badge.style.color = '#000';
  } else {
    badge.textContent = 'Historical baseline';
  }

  // Weight breakdown
  const wb = document.getElementById('weight-breakdown');
  const bars = document.getElementById('weight-bars');
  wb.style.display = 'block';
  const labels = { historical: 'Historical', recentForm: 'Recent Form', homefield: 'Home Field', season: 'Season Data' };
  const colors = { historical: 'var(--muted)', recentForm: '#a78bfa', homefield: '#f59e0b', season: '#22c55e' };
  bars.innerHTML = '';
  for (const [k, v] of Object.entries(pred.weights)) {
    const pct = Math.round(v * 100);
    bars.innerHTML += `<div style="text-align:center;min-width:80px">
      <div style="height:60px;display:flex;align-items:flex-end;justify-content:center;margin-bottom:.3rem">
        <div style="width:28px;background:${colors[k]};border-radius:4px 4px 0 0;height:${pct * 1.4}px;opacity:.85"></div>
      </div>
      <div style="font-size:.7rem;color:var(--muted)">${labels[k]}</div>
      <div style="font-size:.85rem;font-weight:600">${pct}%</div>
    </div>`;
  }
}

function buildStandingsTable(teams) {
  // Sort by conf wins desc, then overall wins
  teams.sort((a, b) => b.confWins - a.confWins || b.overallWins - a.overallWins || (b.pf - b.pa) - (a.pf - a.pa));
  const tbody = document.getElementById('standings-body');
  tbody.innerHTML = '';
  teams.forEach((t, i) => {
    const diff = t.pf - t.pa;
    const diffStr = diff > 0 ? '+' + diff : String(diff);
    const diffColor = diff > 0 ? '#22c55e' : diff < 0 ? '#ef4444' : 'var(--muted)';
    const isHY = t.id === 'harvard' || t.id === 'yale';
    const nameColor = t.id === 'harvard' ? 'var(--crimson)' : t.id === 'yale' ? 'var(--yale-blue)' : 'var(--text)';
    const bg = isHY ? 'rgba(255,255,255,0.03)' : 'transparent';
    tbody.innerHTML += `<tr style="border-bottom:1px solid var(--border);background:${bg}">
      <td style="padding:.6rem 1rem;font-weight:${isHY ? '600' : '400'};color:${nameColor}">${t.name}</td>
      <td style="padding:.6rem 1rem;text-align:center">${t.confWins}–${t.confLosses}</td>
      <td style="padding:.6rem 1rem;text-align:center">${t.overallWins}–${t.overallLosses}</td>
      <td style="padding:.6rem 1rem;text-align:center">${t.pf}</td>
      <td style="padding:.6rem 1rem;text-align:center">${t.pa}</td>
      <td style="padding:.6rem 1rem;text-align:center;color:${diffColor}">${diffStr}</td>
    </tr>`;
  });
}

function calcSeasonScore(harvard, yale) {
  // Returns 0-1 score (Harvard perspective)
  if (!harvard || !yale) return 0.5;
  const totalGames = harvard.overallWins + harvard.overallLosses + yale.overallWins + yale.overallLosses;
  if (totalGames === 0) return 0.5;

  // Win rate comparison
  const hGames = harvard.overallWins + harvard.overallLosses || 1;
  const yGames = yale.overallWins + yale.overallLosses || 1;
  const hWinRate = harvard.overallWins / hGames;
  const yWinRate = yale.overallWins / yGames;
  const winRateFactor = 0.5 + (hWinRate - yWinRate) * 0.5;

  // Point differential comparison
  const hDiff = (harvard.pf - harvard.pa) / hGames;
  const yDiff = (yale.pf - yale.pa) / yGames;
  const maxDiff = 30;
  const ptDiffFactor = 0.5 + ((hDiff - yDiff) / (2 * maxDiff)) * 0.5;

  // Conference record comparison
  const hConfGames = harvard.confWins + harvard.confLosses || 1;
  const yConfGames = yale.confWins + yale.confLosses || 1;
  const hConfRate = harvard.confWins / hConfGames;
  const yConfRate = yale.confWins / yConfGames;
  const confFactor = 0.5 + (hConfRate - yConfRate) * 0.5;

  // Weighted combination
  const score = winRateFactor * 0.35 + ptDiffFactor * 0.35 + confFactor * 0.30;
  return Math.max(0.1, Math.min(0.9, score));
}

async function fetchLiveStandings() {
  try {
    const res = await fetch(ESPN_IVY_STANDINGS);
    if (!res.ok) throw new Error('ESPN API error');
    const data = await res.json();
    const teams = [];
    const entries = data?.children?.[0]?.standings?.entries || [];
    const teamMap = {
      '108': 'harvard', '43': 'yale', '219': 'princeton', '172': 'penn',
      '148': 'dartmouth', '38': 'columbia', '225': 'brown', '171': 'cornell'
    };
    entries.forEach(e => {
      const id = String(e.team?.id);
      const key = teamMap[id];
      const stats = {};
      (e.stats || []).forEach(s => { stats[s.name] = s.value || parseFloat(s.displayValue) || 0; });
      teams.push({
        id: key || id,
        name: e.team?.displayName || e.team?.name || 'Unknown',
        overallWins: stats.wins || 0,
        overallLosses: stats.losses || 0,
        confWins: stats.conferenceWins || stats.groupWins || 0,
        confLosses: stats.conferenceLosses || stats.groupLosses || 0,
        pf: stats.pointsFor || 0,
        pa: stats.pointsAgainst || 0
      });
    });
    return { teams, live: true };
  } catch (err) {
    console.warn('ESPN fetch failed, trying fallback:', err);
    try {
      const res = await fetch(FALLBACK_DATA_URL);
      const data = await res.json();
      const teams = Object.entries(data.teams).map(([id, t]) => ({
        id, name: t.name,
        overallWins: t.overallWins, overallLosses: t.overallLosses,
        confWins: t.confWins, confLosses: t.confLosses,
        pf: t.pointsFor, pa: t.pointsAgainst
      }));
      return { teams, live: false };
    } catch { return { teams: [], live: false }; }
  }
}

(async function initSeasonData() {
  const { teams, live } = await fetchLiveStandings();
  const section = document.getElementById('standings-section');
  if (teams.length === 0) {
    // No data — use baseline prediction
    updatePredictionUI(computePrediction(BASE_WEIGHTS, 0.5), false);
    document.getElementById('season-momentum-val').textContent = 'No Data';
    document.getElementById('season-momentum-detail').textContent = 'Season data unavailable. Model uses historical baseline only.';
    document.getElementById('scoring-power-val').textContent = 'N/A';
    document.getElementById('scoring-power-detail').textContent = 'No current season data to calculate scoring differentials.';
    return;
  }

  section.style.display = 'block';
  const badge = document.getElementById('standings-live-badge');
  if (!live) {
    badge.textContent = 'Cached';
    badge.style.background = 'var(--border)';
    badge.style.color = 'var(--muted)';
  }
  document.getElementById('standings-updated').textContent = live
    ? 'Data from ESPN — updated in real time'
    : 'Using cached fallback data';

  buildStandingsTable(teams);

  const harvard = teams.find(t => t.id === 'harvard');
  const yale = teams.find(t => t.id === 'yale');
  const seasonScore = calcSeasonScore(harvard, yale);
  const weights = live ? LIVE_WEIGHTS : BASE_WEIGHTS;
  const pred = computePrediction(weights, seasonScore);
  updatePredictionUI(pred, live);

  // Update momentum card
  const momEl = document.getElementById('season-momentum-val');
  const momDet = document.getElementById('season-momentum-detail');
  if (harvard && yale) {
    const hW = harvard.overallWins, yW = yale.overallWins;
    if (hW > yW) { momEl.textContent = 'Harvard'; momEl.style.color = 'var(--crimson)'; }
    else if (yW > hW) { momEl.textContent = 'Yale'; momEl.style.color = 'var(--yale-blue)'; }
    else { momEl.textContent = 'Even'; momEl.style.color = 'var(--muted)'; }
    momDet.textContent = `Harvard ${hW}–${harvard.overallLosses} overall vs Yale ${yW}–${yale.overallLosses}. Season record directly influences model weight by ${Math.round(weights.season * 100)}%.`;
  }

  // Update scoring power card
  const spEl = document.getElementById('scoring-power-val');
  const spDet = document.getElementById('scoring-power-detail');
  if (harvard && yale) {
    const hDiff = harvard.pf - harvard.pa;
    const yDiff = yale.pf - yale.pa;
    const leader = hDiff > yDiff ? 'Harvard' : yDiff > hDiff ? 'Yale' : 'Even';
    spEl.textContent = (hDiff > yDiff ? '+' : '') + (hDiff - yDiff);
    spEl.style.color = hDiff > yDiff ? 'var(--crimson)' : yDiff > hDiff ? 'var(--yale-blue)' : 'var(--muted)';
    spDet.textContent = `Harvard PD: ${hDiff >= 0 ? '+' : ''}${hDiff} | Yale PD: ${yDiff >= 0 ? '+' : ''}${yDiff}. Net differential advantage factors into scoring projections.`;
  }
})();

// Decade data
const decades=[
  {era:'1875–1889',h:4,y:10,t:1},{era:'1890–1899',h:7,y:2,t:1},{era:'1900–1909',h:4,y:4,t:2},
  {era:'1910–1919',h:3,y:5,t:1},{era:'1920–1929',h:3,y:5,t:2},{era:'1930–1939',h:4,y:5,t:0},
  {era:'1940–1949',h:3,y:5,t:1},{era:'1950–1959',h:5,y:5,t:0},{era:'1960–1969',h:4,y:5,t:1},
  {era:'1970–1979',h:5,y:5,t:0},{era:'1980–1989',h:5,y:5,t:0},{era:'1990–1999',h:5,y:5,t:0},
  {era:'2000–2009',h:5,y:5,t:0},{era:'2010–2019',h:4,y:6,t:0},{era:'2020–2025',h:3,y:3,t:0}
];
const grid=document.getElementById('decades');
decades.forEach(d=>{
  const dom=d.h>d.y?'Harvard':'Yale';
  const cls=d.h>d.y?'h-dom':d.y>d.h?'y-dom':'split';
  const label=d.h===d.y?'Even':dom;
  grid.innerHTML+=`<div class="decade-card"><div class="era">${d.era}</div><div class="record">${d.h}–${d.y}–${d.t}</div><div class="dominant ${cls}">${label}</div></div>`;
});
</script>
</body>
</html>
